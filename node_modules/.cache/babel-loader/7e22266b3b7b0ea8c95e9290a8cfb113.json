{"ast":null,"code":"import _toConsumableArray from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Form from'./Form';import AddTable from'./AddTable';function App(){var sid;var session=JSON.parse(window.localStorage.getItem('session'));if(session)sid=session.sid;var _useState=useState({name:'',age:'',salary:''}),_useState2=_slicedToArray(_useState,2),obj=_useState2[0],setObj=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),details=_useState4[0],setDetails=_useState4[1];useEffect(function(){fetchDetails();},[]);var fetchDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.fetch(\"http://localhost:5000/getData/?sid=\".concat(sid));case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;console.log('resuklt',result);setDetails(result);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchDetails(){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){e.persist();setObj(_objectSpread(_objectSpread({},obj),{},_defineProperty({},e.target.name,e.target.value)));};var addDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url,data){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return window.fetch(url,{method:'POST',body:JSON.stringify(data),headers:{'Content-Type':'application/json'}});case 2:response=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function addDetails(_x,_x2){return _ref2.apply(this,arguments);};}();var deleteDetails=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(url,id){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return window.fetch(url,{method:'Delete',body:JSON.stringify({id:id}),headers:{'Content-Type':'application/json'}});case 2:response=_context3.sent;case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteDetails(_x3,_x4){return _ref3.apply(this,arguments);};}();var editDetail=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url,data){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log('deta',data);_context4.next=3;return window.fetch(url,{method:'put',body:JSON.stringify(data),headers:{'Content-Type':'application/json'}});case 3:response=_context4.sent;console.log('response',response);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function editDetail(_x5,_x6){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(e){e.preventDefault();var object={id:Date.now(),name:obj.name,age:obj.age,salary:obj.salary,sid:sid};setDetails([].concat(_toConsumableArray(details),[object]));addDetails('http://localhost:5000/insertData',object);setObj({name:'',age:'',salary:''});};var handleDelete=function handleDelete(id){setDetails(details.filter(function(item){return item.id!==id;}));deleteDetails('http://localhost:5000/deleteRow',id);};var handleEdit=function handleEdit(id,data){var value=window.prompt(\"Enter \".concat(data,\" to update\"));if(value){var editedDetails=details.map(function(item){if(item.id===id){item[data]=value;return item;}return item;});setDetails(editedDetails);if(value)editDetail('http://localhost:5000/editDetail',{id:id,data:data,value:value});}};return/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(Form,{obj:obj,onInput:function onInput(e){return handleChange(e);},onSubmit:function onSubmit(e){return handleSubmit(e);}}),/*#__PURE__*/React.createElement(AddTable,{details:details,onDelete:function onDelete(id){return handleDelete(id);},onEdit:function onEdit(id,data){return handleEdit(id,data);}}));}export default App;","map":{"version":3,"sources":["/home/admi/Table/src/App.js"],"names":["React","useState","useEffect","Form","AddTable","App","sid","session","JSON","parse","window","localStorage","getItem","name","age","salary","obj","setObj","details","setDetails","fetchDetails","fetch","response","json","result","console","log","handleChange","e","persist","target","value","addDetails","url","data","method","body","stringify","headers","deleteDetails","id","editDetail","handleSubmit","preventDefault","object","Date","now","handleDelete","filter","item","handleEdit","prompt","editedDetails","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Form from './Form'\nimport AddTable from './AddTable'\n\nfunction App () {\n  let sid\n  const session = JSON.parse(window.localStorage.getItem('session'))\n\n  if (session) sid = session.sid\n\n  const [obj, setObj] = useState({\n    name: '',\n    age: '',\n    salary: ''\n  })\n  const [details, setDetails] = useState([])\n\n  useEffect(() => {\n    fetchDetails()\n  }, [])\n\n  const fetchDetails = async () => {\n    const response = await window.fetch(`http://localhost:5000/getData/?sid=${sid}`)\n    const result = await response.json()\n    console.log('resuklt', result)\n    setDetails(result)\n  }\n\n  const handleChange = e => {\n    e.persist()\n    setObj({ ...obj, [e.target.name]: e.target.value })\n  }\n\n  const addDetails = async (url, data) => {\n    const response = await window.fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  const deleteDetails = async (url, id) => {\n    const response = await window.fetch(url, {\n      method: 'Delete',\n      body: JSON.stringify({ id }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  const editDetail = async (url, data) => {\n    console.log('deta', data)\n    const response = await window.fetch(url, {\n      method: 'put',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    console.log('response', response)\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    const object = {\n      id: Date.now(),\n      name: obj.name,\n      age: obj.age,\n      salary: obj.salary,\n      sid: sid\n    }\n    setDetails([...details, object])\n    addDetails('http://localhost:5000/insertData', object)\n    setObj({ name: '', age: '', salary: '' })\n  }\n\n  const handleDelete = id => {\n    setDetails(details.filter(item => item.id !== id))\n    deleteDetails('http://localhost:5000/deleteRow', id)\n  }\n\n  const handleEdit = (id, data) => {\n    const value = window.prompt(`Enter ${data} to update`)\n    if (value) {\n      const editedDetails = details.map(item => {\n        if (item.id === id) {\n          item[data] = value\n          return item\n        }\n        return item\n      })\n      setDetails(editedDetails)\n      if (value) editDetail('http://localhost:5000/editDetail', { id, data, value: value })\n    }\n  }\n\n  return (\n    <main>\n\n      <Form\n        obj={obj}\n        onInput={e => handleChange(e)}\n        onSubmit={e => handleSubmit(e)}\n      />\n      <AddTable\n        details={details}\n        onDelete={id => handleDelete(id)}\n        onEdit={(id, data) => handleEdit(id, data)}\n      />\n    </main>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}