{"ast":null,"code":"import _regeneratorRuntime from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/admi/Table/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject7(){var data=_taggedTemplateLiteral([\"\\ngrid-area: 4/1/5/3;\\nmargin: auto;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\ncolor: green;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\ncolor: red;\\ngrid-area: 5/1/6/3;\\nmargin: auto;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\npadding: 10px;\\nborder-radius: 50px; \\nborder: 1px solid grey;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\ngrid-area: 3/1/4/3;\\nwidth: 100px;\\nmargin:auto;\\ncolor: #388f38;\\nborder: none;\\npadding: 10px;\\nborder-radius: 30px;\\nfont-weight: bold;\\nbackground-color: #ddcfcf;\\nbox-shadow: 3px 2px grey;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\nborder: 1px solid grey;\\ndisplay: grid;\\ngrid-template-columns: 150px 300px;\\ngrid-row-gap: 20px;\\npadding: 40px 20px 20px 20px;\\nwidth: 500px;\\nmargin:100px auto;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\nmargin-top: 50px;\\ntext-align: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import styled from'styled-components';import{Redirect,Link}from'react-router-dom';var Heading=styled.h1(_templateObject());var Form=styled.form(_templateObject2());var Button=styled.button(_templateObject3());var Input=styled.input(_templateObject4());var Response=styled.p(_templateObject5());var Success=styled(Response)(_templateObject6());var ResetPswd=styled(Link)(_templateObject7());function Login(){var isLoggedIn=window.localStorage.getItem('session');var active;var _useState=useState({email:'',pswd:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),successMsg=_useState4[0],setSuccessMsg=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),resMsg=_useState6[0],setResMsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isRedirect=_useState8[0],setRedirect=_useState8[1];if(isLoggedIn){active=true;}var handleInput=function handleInput(e){e.persist();setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));setResMsg('');};var handleSubmit=function handleSubmit(e){e.preventDefault();var obj={email:values.email,pswd:values.pswd};login('http://localhost:5000/login',obj);setValues({email:'',pswd:''});};var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url,data){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.fetch(url,{method:'Post',body:JSON.stringify(data),headers:{'Content-Type':'application/json'}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;console.log('result from login',result);if(result.msg){setResMsg(result);}if(result.success){setSuccessMsg(result.success);console.log('session',result.sessionObj);window.localStorage.setItem('session',JSON.stringify(result.sessionObj));setTimeout(function(){return setRedirect(true);},1000);setResMsg('');}case 9:case\"end\":return _context.stop();}}},_callee);}));return function login(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,active&&/*#__PURE__*/React.createElement(Redirect,{to:\"/app\"}),!active&&/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(Heading,null,\"Login\")),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email :\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",placeholder:\"Enter your email\",name:\"email\",id:\"email\",required:true,value:values.email,onChange:handleInput}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"pswd\"},\"Password :\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Enter Password\",name:\"pswd\",id:\"pswd\",required:true,value:values.pswd,onChange:handleInput}),/*#__PURE__*/React.createElement(Button,null,\"Submit\"),/*#__PURE__*/React.createElement(ResetPswd,{to:\"pswdSet\"},\"Forgot Password\"),resMsg&&/*#__PURE__*/React.createElement(Response,null,resMsg.msg),successMsg&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Success,null,successMsg),isRedirect&&/*#__PURE__*/React.createElement(Redirect,{to:\"/app\"}))))));}export default Login;","map":{"version":3,"sources":["/home/admi/Table/src/Login.js"],"names":["React","useState","styled","Redirect","Link","Heading","h1","Form","form","Button","button","Input","input","Response","p","Success","ResetPswd","Login","isLoggedIn","window","localStorage","getItem","active","email","pswd","values","setValues","successMsg","setSuccessMsg","resMsg","setResMsg","isRedirect","setRedirect","handleInput","e","persist","target","name","value","handleSubmit","preventDefault","obj","login","url","data","fetch","method","body","JSON","stringify","headers","response","json","result","console","log","msg","success","sessionObj","setItem","setTimeout"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { Redirect, Link } from 'react-router-dom'\n\nconst Heading = styled.h1`\nmargin-top: 50px;\ntext-align: center;\n`\nconst Form = styled.form`\nborder: 1px solid grey;\ndisplay: grid;\ngrid-template-columns: 150px 300px;\ngrid-row-gap: 20px;\npadding: 40px 20px 20px 20px;\nwidth: 500px;\nmargin:100px auto;\n`\nconst Button = styled.button`\ngrid-area: 3/1/4/3;\nwidth: 100px;\nmargin:auto;\ncolor: #388f38;\nborder: none;\npadding: 10px;\nborder-radius: 30px;\nfont-weight: bold;\nbackground-color: #ddcfcf;\nbox-shadow: 3px 2px grey;\n`\nconst Input = styled.input`\npadding: 10px;\nborder-radius: 50px; \nborder: 1px solid grey;\n`\nconst Response = styled.p`\ncolor: red;\ngrid-area: 5/1/6/3;\nmargin: auto;\n`\nconst Success = styled(Response)`\ncolor: green;\n`\nconst ResetPswd = styled(Link)`\ngrid-area: 4/1/5/3;\nmargin: auto;\n`\n\nfunction Login () {\n  const isLoggedIn = window.localStorage.getItem('session')\n  let active\n  const [values, setValues] = useState({\n    email: '',\n    pswd: ''\n  })\n\n  const [successMsg, setSuccessMsg] = useState('')\n  const [resMsg, setResMsg] = useState('')\n  const [isRedirect, setRedirect] = useState(false)\n  if (isLoggedIn) {\n    active = true\n  }\n\n  const handleInput = e => {\n    e.persist()\n    setValues({ ...values, [e.target.name]: e.target.value })\n    setResMsg('')\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    const obj = {\n      email: values.email,\n      pswd: values.pswd\n    }\n    login('http://localhost:5000/login', obj)\n    setValues({\n      email: '',\n      pswd: ''\n    })\n  }\n\n  const login = async (url, data) => {\n    const response = await window.fetch(url, {\n      method: 'Post',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    const result = await response.json()\n    console.log('result from login', result)\n    if (result.msg) {\n      setResMsg(result)\n    }\n    if (result.success) {\n      setSuccessMsg(result.success)\n      console.log('session', result.sessionObj)\n      window.localStorage.setItem('session', JSON.stringify(result.sessionObj))\n      setTimeout(() => setRedirect(true), 1000)\n      setResMsg('')\n    }\n  }\n\n  return (\n    <>\n      {active && <Redirect to='/app' />}\n      {!active &&\n        <main>\n          <header>\n            <Heading>Login</Heading>\n          </header>\n          <section>\n            <Form onSubmit={handleSubmit}>\n              <label htmlFor='email'>Email :</label>\n              <Input\n                type='email'\n                placeholder='Enter your email'\n                name='email' id='email'\n                required\n                value={values.email}\n                onChange={handleInput}\n              />\n              <label htmlFor='pswd'>Password :</label>\n              <Input\n                type='password'\n                placeholder='Enter Password'\n                name='pswd' id='pswd'\n                required\n                value={values.pswd}\n                onChange={handleInput}\n              />\n              <Button>Submit</Button>\n              <ResetPswd to='pswdSet'>Forgot Password</ResetPswd>\n              {resMsg &&\n                <Response>{resMsg.msg}</Response>}\n              {successMsg &&\n                <>\n                  <Success>{successMsg}</Success>\n                  {isRedirect && <Redirect to='/app' />}\n                </>}\n\n            </Form>\n          </section>\n        </main>}\n\n    </>\n  )\n}\nexport default Login\n"]},"metadata":{},"sourceType":"module"}