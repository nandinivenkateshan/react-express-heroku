{"ast":null,"code":"var _jsxFileName = \"/home/admi/Table/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Form from './Form';\nimport AddTable from './AddTable';\n\nfunction App() {\n  let sid;\n  const session = JSON.parse(window.localStorage.getItem('session'));\n  if (session) sid = session.sid;\n  const [obj, setObj] = useState({\n    name: '',\n    age: '',\n    salary: ''\n  });\n  const [details, setDetails] = useState([]);\n  useEffect(() => {\n    fetchDetails();\n  }, []);\n\n  const fetchDetails = async () => {\n    const response = await window.fetch(`http://localhost:5000/getData/?sid=${sid}`);\n    const result = await response.json();\n    console.log('resuklt', result);\n    setDetails(result);\n  };\n\n  const handleChange = e => {\n    e.persist();\n    setObj({ ...obj,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const addDetails = async (url, data) => {\n    const response = await window.fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  };\n\n  const deleteDetails = async (url, id) => {\n    const response = await window.fetch(url, {\n      method: 'Delete',\n      body: JSON.stringify({\n        id\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  };\n\n  const editDetail = async (url, data) => {\n    console.log('deta', data);\n    const response = await window.fetch(url, {\n      method: 'put',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    console.log('response', response);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const object = {\n      id: Date.now(),\n      name: obj.name,\n      age: obj.age,\n      salary: obj.salary,\n      sid: sid\n    };\n    setDetails([...details, object]);\n    addDetails('http://localhost:5000/insertData', object);\n    setObj({\n      name: '',\n      age: '',\n      salary: ''\n    });\n  };\n\n  const handleDelete = id => {\n    setDetails(details.filter(item => item.id !== id));\n    deleteDetails('http://localhost:5000/deleteRow', id);\n  };\n\n  const handleEdit = (id, data) => {\n    const value = window.prompt(`Enter ${data} to update`);\n\n    if (value) {\n      const editedDetails = details.map(item => {\n        if (item.id === id) {\n          item[data] = value;\n          return item;\n        }\n\n        return item;\n      });\n      setDetails(editedDetails);\n      if (value) editDetail('http://localhost:5000/editDetail', {\n        id,\n        data,\n        value: value\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    obj: obj,\n    onInput: e => handleChange(e),\n    onSubmit: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(AddTable, {\n    details: details,\n    onDelete: id => handleDelete(id),\n    onEdit: (id, data) => handleEdit(id, data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/admi/Table/src/App.js"],"names":["React","useState","useEffect","Form","AddTable","App","sid","session","JSON","parse","window","localStorage","getItem","obj","setObj","name","age","salary","details","setDetails","fetchDetails","response","fetch","result","json","console","log","handleChange","e","persist","target","value","addDetails","url","data","method","body","stringify","headers","deleteDetails","id","editDetail","handleSubmit","preventDefault","object","Date","now","handleDelete","filter","item","handleEdit","prompt","editedDetails","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Form from './Form'\nimport AddTable from './AddTable'\n\nfunction App () {\n  let sid\n  const session = JSON.parse(window.localStorage.getItem('session'))\n\n  if (session) sid = session.sid\n\n  const [obj, setObj] = useState({\n    name: '',\n    age: '',\n    salary: ''\n  })\n  const [details, setDetails] = useState([])\n\n  useEffect(() => {\n    fetchDetails()\n  }, [])\n\n  const fetchDetails = async () => {\n    const response = await window.fetch(`http://localhost:5000/getData/?sid=${sid}`)\n    const result = await response.json()\n    console.log('resuklt', result)\n    setDetails(result)\n  }\n\n  const handleChange = e => {\n    e.persist()\n    setObj({ ...obj, [e.target.name]: e.target.value })\n  }\n\n  const addDetails = async (url, data) => {\n    const response = await window.fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  const deleteDetails = async (url, id) => {\n    const response = await window.fetch(url, {\n      method: 'Delete',\n      body: JSON.stringify({ id }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  const editDetail = async (url, data) => {\n    console.log('deta', data)\n    const response = await window.fetch(url, {\n      method: 'put',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    console.log('response', response)\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    const object = {\n      id: Date.now(),\n      name: obj.name,\n      age: obj.age,\n      salary: obj.salary,\n      sid: sid\n    }\n    setDetails([...details, object])\n    addDetails('http://localhost:5000/insertData', object)\n    setObj({ name: '', age: '', salary: '' })\n  }\n\n  const handleDelete = id => {\n    setDetails(details.filter(item => item.id !== id))\n    deleteDetails('http://localhost:5000/deleteRow', id)\n  }\n\n  const handleEdit = (id, data) => {\n    const value = window.prompt(`Enter ${data} to update`)\n    if (value) {\n      const editedDetails = details.map(item => {\n        if (item.id === id) {\n          item[data] = value\n          return item\n        }\n        return item\n      })\n      setDetails(editedDetails)\n      if (value) editDetail('http://localhost:5000/editDetail', { id, data, value: value })\n    }\n  }\n\n  return (\n    <main>\n\n      <Form\n        obj={obj}\n        onInput={e => handleChange(e)}\n        onSubmit={e => handleSubmit(e)}\n      />\n      <AddTable\n        details={details}\n        onDelete={id => handleDelete(id)}\n        onEdit={(id, data) => handleEdit(id, data)}\n      />\n    </main>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}